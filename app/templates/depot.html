<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MyGit - Projet</title>
  <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}">
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Inter:400,500,700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: Inter, system-ui, sans-serif;
    }
  </style>
</head>

<body class="bg-white text-gray-900 font-sans">
  <!-- Top header -->
  <header class="border-b border-gray-200 px-6 py-4 flex items-center justify-between">
    <div class="flex items-center space-x-2">
      <svg class="w-6 h-6 text-purple-600" fill="currentColor" viewBox="0 0 24 24">
        <path
          d="M12 0C5.37 0 0 5.37 0 12c0 5.3 3.438 9.8 8.205 11.385.6.112.82-.26.82-.577v-2.024c-3.338.726-4.033-1.415-4.033-1.415-.546-1.387-1.333-1.756-1.333-1.756-1.09-.744.083-.729.083-.729 1.205.085 1.84 1.237 1.84 1.237 1.07 1.834 2.807 1.304 3.492.997.108-.775.418-1.305.76-1.604-2.665-.3-5.467-1.334-5.467-5.932 0-1.31.468-2.382 1.236-3.222-.124-.303-.536-1.523.116-3.176 0 0 1.008-.322 3.3 1.23a11.5 11.5 0 0 1 3.003-.403 11.5 11.5 0 0 1 3.003.403c2.29-1.553 3.296-1.23 3.296-1.23.654 1.653.242 2.873.118 3.176.77.84 1.235 1.913 1.235 3.222 0 4.61-2.807 5.63-5.48 5.922.43.37.823 1.102.823 2.222v3.293c0 .32.218.694.825.576C20.565 21.796 24 17.297 24 12c0-6.63-5.37-12-12-12z" />
      </svg>
      <span class="text-xl font-semibold">My Github</span>
    </div>
    <div class="text-sm text-gray-600">Bienvenue !</div>
  </header>

  <!-- Branch bar -->
  <div class="bg-gray-100 border-b border-gray-200 px-6 py-3 flex items-center justify-between text-sm">
    <div class="flex items-center space-x-2">
      <label for="branch-select" class="font-medium text-gray-700">Branch:</label>
      <select id="branch-select" class="border border-gray-300 rounded px-2 py-1"
        onchange="location.href='/branch/' + this.value;">
        {% for branch in branches %}
        <option value="{{ branch }}" {% if branch==current_branch %}selected{% endif %}>{{ branch }}</option>
        {% endfor %}
      </select>
      <!-- Bouton Branches -->
      <a href="/branches"
        class="flex items-center px-2 py-1 border border-gray-300 rounded bg-white hover:bg-gray-100 ml-2"
        title="Voir toutes les branches">
        <svg class="w-4 h-4 mr-1 text-gray-600" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 3v12a3 3 0 003 3h6m0 0l-3 3m3-3l-3-3" />
        </svg>
        Branches
      </a>
    </div>
    <span id="branch-count" class="text-gray-600">{{ branches|length }} branch{{ 'es' if branches|length > 1 else '' }}</span>
  </div>

  <!-- Main content with sidebar and content -->
  <div class="flex flex-col lg:flex-row px-6 py-6 space-y-6 lg:space-y-0 lg:space-x-6">
    <!-- Sidebar -->
    <aside class="w-full lg:w-1/3 space-y-6">
      <!-- About section -->
      <div>
        <h2 class="text-md font-semibold mb-1">About</h2>
        <p class="text-sm text-gray-600">No description, website, or topics provided.</p>
      </div>

      <!-- Activity and repo stats -->
      <div class="text-sm space-y-2">
        <div class="flex items-center space-x-2">
          <svg class="w-4 h-4 text-gray-500" fill="currentColor" viewBox="0 0 20 20">
            <path
              d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.975a1 1 0 00.95.69h4.18c.969 0 1.371 1.24.588 1.81l-3.388 2.46a1 1 0 00-.364 1.118l1.287 3.974c.3.922-.755 1.688-1.54 1.118L10 13.348l-3.388 2.46c-.785.57-1.84-.196-1.54-1.118l1.287-3.974a1 1 0 00-.364-1.118l-3.388-2.46c-.783-.57-.38-1.81.588-1.81h4.18a1 1 0 00.95-.69l1.286-3.975z" />
          </svg>
          <span>0 stars</span>
        </div>
        <div class="flex items-center space-x-2">
          <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M15 17h5l-1.405-1.405M20 12h-5m0 0l-1.405-1.405M20 7h-5m0 0l-1.405-1.405" />
          </svg>
          <span>1 watching</span>
        </div>
        <div class="flex items-center space-x-2">
          <svg class="w-4 h-4 text-gray-500" fill="currentColor" viewBox="0 0 20 20">
            <path d="M10 12a1.99 1.99 0 011.712 1H17v-1a2 2 0 00-2-2h-3.065A1.99 1.99 0 0110 12z" />
            <path fill-rule="evenodd" d="M10 18a6 6 0 100-12 6 6 0 000 12zM4 10a6 6 0 1112 0A6 6 0 014 10z"
              clip-rule="evenodd" />
          </svg>
          <span>0 forks</span>
        </div>
      </div>

      <!-- README section -->
      <div class="border rounded bg-white mt-6 p-4 flex flex-col items-center">
        <div class="flex items-center mb-2">
          <svg class="w-5 h-5 text-gray-700 mr-2" fill="none" stroke="currentColor" stroke-width="2"
            viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 20h9" />
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m0 0H3m9 0h9" />
          </svg>
          <span class="font-semibold text-gray-700">README</span>
        </div>
        {% if readme_content %}
        <div class="prose prose-sm max-w-none w-full text-left">
          {{ readme_content|safe }}
        </div>
        {% else %}
        <div class="flex flex-col items-center w-full">
          <svg class="w-10 h-10 text-gray-400 mb-2" fill="none" stroke="currentColor" stroke-width="1.5"
            viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M4 4h16v16H4z" />
            <path stroke-linecap="round" stroke-linejoin="round" d="M8 8h8M8 12h8M8 16h4" />
          </svg>
          <p class="text-lg font-semibold mb-1">Ajout README</p>
          <p class="text-gray-500 text-sm mb-3 text-center">Aidez les personnes intéressées par ce dépôt à comprendre votre
            projet en ajoutant un README.</p>
          <a href="#" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 text-sm font-semibold">Ajouter un
            README</a>
        </div>
        {% endif %}
      </div>
    </aside>



    <!-- Main repository content -->
    <main class="w-full lg:w-2/3 space-y-8">
      <div>
        <h2 class="text-lg font-semibold mb-3">Fichiers du dépôt :</h2>
        <ul id="file-list" class="border rounded bg-white divide-y">
          {% if files %}
          {% for file in files %}
          <li class="px-4 py-2 flex justify-between">
            <span>{{ file }}</span>
            <span class="text-gray-500 text-xs">
              {{ file_commits.get(file, {}).get('message', "(pas de commit)") }}
            </span>
          </li>
          {% endfor %}
          {% else %}
          <li class="px-4 py-2">(vide)</li>
          {% endif %}
        </ul>
      </div>

      <div>
        <h2 class="text-lg font-semibold mb-3">Index (staging area) :</h2>
        <ul id="index-list" class="border rounded bg-white divide-y">
          {% if index %}
          {% for file in index %}
          <li class="px-4 py-2">{{ file }}</li>
          {% endfor %}
          {% else %}
          <li class="px-4 py-2">(aucun fichier ajouté)</li>
          {% endif %}
        </ul>
      </div>
    </main>
  </div>
</body>

</html>